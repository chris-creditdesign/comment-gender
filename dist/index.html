<style scoped>
.status-message{border:1px solid #c00;background:#fac7c7;padding:10px}.outer-wrapper{width:630px;height:1000px;display:none}.outer-wrapper h1{font-size:1.1em;letter-spacing:.1em;padding:0 0 0 3px;margin:0}.outer-wrapper .count-chart{position:relative;height:350px;width:630px}.outer-wrapper .count-chart .tooltip{position:absolute;padding:10px;background-color:#333;pointer-events:none;opacity:0;z-index:100;max-height:40px}.outer-wrapper .count-chart .tooltip p{margin:0;color:#ecf0f1;font-family:sans-serif;font-size:16px;line-height:20px}.outer-wrapper .count-chart .tooltip:before{content:"";position:absolute;bottom:-10px;left:49%;border-right:0;border-top:10px solid #333;border-bottom:0;border-left:10px solid transparent}.outer-wrapper .count-chart .tooltip.hidden{display:none}.outer-wrapper .count-chart .axis line,.outer-wrapper .count-chart .axis path{fill:none;stroke:#666;shape-rendering:crispEdges}.outer-wrapper .count-chart .axis text{font-family:sans-serif;fill:#666;font-size:13px;shape-rendering:crispEdges}.outer-wrapper .count-chart .x.axis text{font-size:12px;cursor:default}.outer-wrapper .count-chart rect{shape-rendering:crispEdges}.outer-wrapper .wrapper h2{text-transform:uppercase;font-size:1.1em;letter-spacing:.1em;text-align:center;color:#666;padding:10px 0 5px;margin:0 0 5px}.outer-wrapper .wrapper p{font-size:1.1em;line-height:1.4em;padding:10px 0 0;text-align:center;font-weight:400;color:#666}.outer-wrapper .country-wrapper,.outer-wrapper .wrapper{width:630px;padding:0 0 0 10px;float:left;clear:left}.outer-wrapper form.continent-select,.outer-wrapper form.country-select,.outer-wrapper form.field-select{float:left}.outer-wrapper form.continent-select label,.outer-wrapper form.country-select label,.outer-wrapper form.field-select label{float:left;width:115px;margin:0 10px 0 0;display:block;cursor:pointer}.outer-wrapper form.field-select label{width:170px}.outer-wrapper form.continent-select label.checkbox,.outer-wrapper form.country-select label.checkbox,.outer-wrapper form.field-select label{margin-bottom:6px;padding-left:30px;position:relative;-webkit-transition:.25s;-moz-transition:.25s;-o-transition:.25s;transition:.25s;-webkit-backface-visibility:hidden}.outer-wrapper form.field-select label:hover,.outer-wrapper label.checkbox:hover{color:#a0bec5}.outer-wrapper form.field-select input[type=radio],.outer-wrapper label.checkbox input[type=checkbox]{outline:0!important;opacity:0;filter:alpha(opacity=0);zoom:1;float:left;margin-left:-40px}.outer-wrapper form.field-select label span,.outer-wrapper label.checkbox .icon{display:block;height:20px;left:0;opacity:1;position:absolute;top:-3px;width:20px;-webkit-transition:opacity .1s linear;-moz-transition:opacity .1s linear;-o-transition:opacity .1s linear;transition:opacity .1s linear;-webkit-backface-visibility:hidden}.outer-wrapper label.checkbox.checked .icon .dots{fill:#a0bec5}.outer-wrapper label.checkbox.checked .icon .dots.Australasia{fill:#1abc9c;opacity:.8}.outer-wrapper label.checkbox.checked .icon .dots.North_America{fill:#27ae60;opacity:.8}.outer-wrapper label.checkbox.checked .icon .dots.Asia{fill:#3498db;opacity:.8}.outer-wrapper label.checkbox.checked .icon .dots.Europe{fill:#5959b7;opacity:.8}.outer-wrapper label.checkbox.checked .icon .dots.South_America{fill:#34495e;opacity:.8}.outer-wrapper label.checkbox .icon .dots{fill:#ecf0f1}
</style>
<h1>Gender barchart for comment</h1>
<p>Introduction</p>

<p class="status-message"><em>The interactive companion to this table requires a modern browser (e.g. Chrome, Safari, Firefox or Internet Explorer 9+) with javascript enabled.</em></p>

<div class="outer-wrapper">
	
	<h1>Total papers published</h1>
	<div class="count-chart">
		<div class="tooltip hidden">
			<p><span class="value"></span></p>
		</div>
	</div><!-- count-chart -->

	<div class="wrapper field-wrapper">
	<h2>Field</h2>
		<form class="field-select">

			<label for="TotalPaper">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots TotalPaper'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="TotalPaper" value="TotalPaper" checked>
				Total Paper
			</label>
			<label for="SingleF">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots SingleF'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="SingleF" value="SingleF">
				Single Female
			</label>
			<label for="SingleM">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots SingleM'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="SingleM" value="SingleM">
				Single Male
			</label>
			<label for="NatFirstF">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots NatFirstF'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="NatFirstF" value="NatFirstF">
				National First Female
			</label>
			<label for="NatFirstM">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots NatFirstM'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="NatFirstM" value="NatFirstM">
				National First Male
			</label>
			<label for="NatLastF">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots NatLastF'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="NatLastF" value="NatLastF">
				National Last Female
			</label>
			<label for="NatLastM">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots NatLastM'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="NatLastM" value="NatLastM">
				National Last Male
			</label>
			<label for="IntFirstF">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots IntFirstF'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="IntFirstF" value="IntFirstF">
				International First Female
			</label>
			<label for="IntFirstM">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots IntFirstM'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="IntFirstM" value="IntFirstM">
				International First Male
			</label>
			<label for="IntLastF">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots IntLastF'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="IntLastF" value="IntLastF">
				International Last Female
			</label>
			<label for="IntLastM">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots IntLastM'>
					</svg>
				</span>	
				<input type="radio" name="mode" id="IntLastM" value="IntLastM">
				International Last Male
			</label>
			<label for="FMRatio">
				<span class='icon'>
					<svg height='20' width='20'>
						<circle cx='10' cy='10' r='10' class='dots FMRatio'>
					</svg>
				</span>
				<input type="radio" name="mode" id="FMRatio" value="FMRatio">
				Female to Male Ratio
			</label>
		</form>
	</div><!--class="field-wrapper"-->

	<div class="wrapper country-wrapper">
		<h2>Continent</h2>
		<form class="continent-select">
		</form>

		<h2>Country</h2>
		<form class="country-select">
		</form>
	</div><!--wrapper country-wrapper-->

</div> <!-- outer-wrapper -->
<!--[if gt IE 8]><!-->
<script src="http://www.nature.com/polopoly_static/js/d3.v3.min.js" charset="utf-8"></script>
<script type="text/javascript">
var colourPurple=["#DABDD8","#95177E","#B570A7","#651E59","#461E47"],colourYellow=["#FED162","#F8B436","#F29500","#D37510","#AF6A17"],colourRed=["#EE8361","#EB6B4B","#E85338","#E53524","#A8131D"],colourBlue=["#84D0F0","#3BAADC","#006DB2","#2C3387","#152760"],colourGreen=["#E1DC00","#96BE17","#45A72C","#00892F","#00642D"],colourText=["#363636","#707070","#006699","#5C7996","#222222","#EEEEEE","#F5821F","#C4C4C4"],colourBorder=["#999999","#E7E7E7","#C7C8CC","#B7B7B7","#D4D4D4","#CCCCCC","#006699","#C4C4C4"],colourBackground=["#006699","#2C2C2C","#E1E4E9","#ECECEC","#5E5E5E","#F9F9F9","#F0F1F3"],allBars=["#1abc9c","#27ae60","#3498db","#5959b7","#34495e"];!function(){var a=function(a){function b(){var b=".checkbox",c=b+" input[type='checkbox']",d="checked";a(c).length&&(a(b).each(function(){a(this).removeClass(d)}),a(c+":checked").each(function(){a(this).parent(b).addClass(d)}))}function c(a,b){return a.country<b.country?-1:a.country>b.country?1:0}var d=a("#constrain-content"),e=a("#nav");setTimeout(function(){d&&e?(d.addClass("single-column"),e.remove()):setTimeout(arguments.callee,100)},100),a(".outer-wrapper").css({display:"block"}),a(".status-message").css({display:"none"});var f={top:30,right:20,bottom:15,left:75},g=630-f.left-f.right,h=350-f.top-f.bottom,i=450,j=[],k=[],l=[],m=[],n="TotalPaper",o="Total papers published",p="Papers published",q=[],r=[],s=["All"],t=[],u=!0,v=d3.select(".count-chart").append("svg").attr("width",g+f.left+f.right).attr("height",h+f.top+f.bottom),w=v.append("g").attr("transform","translate("+f.left+",0)"),x=v.append("g").attr("class","x axis").attr("transform","translate("+f.left+",0)"),y=d3.format(",");a.ajax({url:"data/citation-data.html",dataType:"text",success:function(d){function e(){for(;q.length>0;)q.shift();for(;l.length>0;)l.shift();for(;m.length>0;)m.shift();for(;k.length>0;)k.shift();for(;k.length>0;)k.shift();for(var a=0;a<j.length;a++)m.push({});for(var c=0;c<m.length;c++)m[c].country=j[c].country,m[c].countryCode=j[c].countryCode,m[c].continent=j[c].continent;switch(n){case"TotalPaper":for(var d=0;d<m.length;d++)m[d].choice=j[d].TotalPaper;break;case"SingleF":for(var e=0;e<m.length;e++)m[e].choice=j[e].SingleF;break;case"SingleM":for(var f=0;f<m.length;f++)m[f].choice=j[f].SingleM;break;case"NatFirstF":for(var g=0;g<m.length;g++)m[g].choice=j[g].NatFirstF;break;case"NatFirstM":for(var h=0;h<m.length;h++)m[h].choice=j[h].NatFirstM;break;case"NatLastF":for(var i=0;i<m.length;i++)m[i].choice=j[i].NatLastF;break;case"NatLastM":for(var o=0;o<m.length;o++)m[o].choice=j[o].NatLastM;break;case"IntFirstF":for(var p=0;p<m.length;p++)m[p].choice=j[p].IntFirstF;break;case"IntFirstM":for(var r=0;r<m.length;r++)m[r].choice=j[r].IntFirstM;break;case"IntLastF":for(var s=0;s<m.length;s++)m[s].choice=j[s].IntLastF;break;case"IntLastM":for(var t=0;t<m.length;t++)m[t].choice=j[t].IntLastM;break;case"FMRatio":for(var u=0;u<m.length;u++)m[u].choice=j[u].FMRatio;break;default:for(var v=0;v<m.length;v++)m[v].choice=j[v].cc}for(var w=0;w<m.length;w++){var x=m[w].country;d3.select(".country-select [value="+x+"]").property("checked")&&q.push(m[w])}q.sort(function(a,b){return b.choice<a.choice?-1:b.choice>a.choice?1:b.choice===a.choice?a.country<b.country?-1:a.country>b.country?1:0:void 0}),A(),D(),b()}function z(){var b=a(this).val();if("All"===b)a(".continent-select input").prop("checked",a(this).prop("checked")),a(".country-select input").prop("checked",a(this).prop("checked"));else for(var c=0;c<a(".country-select input").length;c++){var d=a(".country-select input").eq(c);b===d.data("continent")&&d.prop("checked",a(this).prop("checked"))}e()}function A(){I.domain([0,d3.max(q,function(a){return a.choice})]),q.length>5?K.domain(d3.range(q.length)):K.domain(d3.range(5));var a=w.selectAll("rect").data(q,function(a){return a.country});t.push(a[0].length),u=t.slice(-2)[1]>=t.slice(-2)[0]?!0:!1,t.shift(),a.enter().append("rect").attr("x",function(a,b){return K(b)}).attr("width",K.rangeBand()).attr("y",h+f.top).attr("height",0).attr("opacity",.8).attr("fill",function(a){switch(a.continent){case"Australasia":return allBars[0];case"North_America":return allBars[1];case"Asia":return allBars[2];case"Europe":return allBars[3];case"South_America":return allBars[4];default:return allBars[0]}}),a.transition().duration(i).delay(function(){return u?0:i}).attr("x",function(a,b){return K(b)}).attr("width",K.rangeBand()).attr("y",function(a){return f.top+I(a.choice)}).attr("height",function(a){return h-I(a.choice)}),a.exit().transition().duration(i).attr("x",function(){return d3.select(this).attr("x")}).attr("width",function(){return d3.select(this).attr("width")}).attr("y",h+f.top).attr("height",0).remove();var b=x.selectAll("text").data(q,function(a){return a.country});b.enter().append("text").attr("x",function(a,b){return K(b)+K.rangeBand()/2}).attr("y",function(){return h+f.top}).attr("text-anchor","middle").text(function(a){return a.countryCode}),b.transition().duration(i).delay(function(){return u?0:i}).attr("x",function(a,b){return K(b)+K.rangeBand()/2}).attr("y",function(a){return f.top+I(a.choice)-2}),b.exit().transition().duration(i).attr("x",function(){return d3.select(this).attr("x")}).attr("y",h+f.top).remove(),v.select(".outer-wrapper .y").transition().duration(i).call(J),a.on("mouseover",function(a){var b=a.country,c=a.choice,d=d3.select(this).attr("x"),e=d3.select(this).attr("y");d3.select(this).attr("fill","#f1c40f"),B(b,c,d,e)}).on("mouseout",function(){d3.select(this).attr("fill",function(a){switch(a.continent){case"Australasia":return allBars[0];case"North_America":return allBars[1];case"Asia":return allBars[2];case"Europe":return allBars[3];case"SAmerica":return allBars[4];default:return allBars[0]}}),C()}),b.on("mouseover",function(b,c){var d=b.country,e=b.choice,f=d3.select(a[0][c]).attr("x"),g=d3.select(a[0][c]).attr("y");d3.select(a[0][c]).attr("fill","#f1c40f"),B(d,e,f,g)}).on("mouseout",function(b,c){d3.select(a[0][c]).attr("fill",function(a){switch(a.continent){case"Australasia":return allBars[0];case"North_America":return allBars[1];case"Asia":return allBars[2];case"Europe":return allBars[3];case"SAmerica":return allBars[4];default:return allBars[0]}}),C()})}function B(b,c,d,e){var f,g=b.replace(/_/g," ");f="TotalPaper"==n?y(c):c,d3.select(".tooltip").select(".value").html(g+"<br /> "+f);var h=parseInt(a(".tooltip").css("width"),10),j=parseInt(a(".tooltip").css("height"),10),k=parseInt(d,10)-h/2+65,l=parseInt(e,10)-j-43;d3.select(".tooltip").style("left",k+"px").style("top",l+"px"),d3.select(".tooltip").classed("hidden",!1).transition().duration(i/2).style("opacity",1)}function C(){d3.select(".tooltip").transition().duration(i/2).style("opacity",0).each("end",function(){d3.select(".tooltip").classed("hidden",!0)})}function D(a){switch(a){case"TotalPaper":o="Total papers published",p="Papers published";break;case"SingleF":o="Single female",p="Citations";break;case"SingleM":o="Single male",p="Citations";break;case"NatFirstF":o="National first female",p="Citations";break;case"NatFirstM":o="National first male",p="Citations";break;case"NatLastF":o="National last female",p="Citations";break;case"NatLastM":o="National last male",p="Citations";break;case"IntFirstF":o="International first female",p="Citations";break;case"IntFirstM":o="International first male",p="Citations";break;case"IntLastF":o="International last female",p="Citations";break;case"IntLastM":o="International last male",p="Citations";break;case"FMRatio":o="Female to male ratio",p="Female to male ratio"}d3.select(".outer-wrapper h1").text(o),d3.selectAll(".y .axisLabel text").text(p)}for(var E=a(d).find("tbody tr"),F=0;F<E.length;F++){var G={};G.country=E.eq(F).find("td").eq(0).text(),G.countryCode=E.eq(F).find("td").eq(1).text(),G.continent=E.eq(F).find("td").eq(2).text(),G.TotalPaper=parseInt(E.eq(F).find("td").eq(3).text(),10),G.SingleF=parseFloat(E.eq(F).find("td").eq(4).text()),G.SingleM=parseFloat(E.eq(F).find("td").eq(5).text()),G.NatFirstF=parseFloat(E.eq(F).find("td").eq(6).text()),G.NatFirstM=parseFloat(E.eq(F).find("td").eq(7).text()),G.NatLastF=parseFloat(E.eq(F).find("td").eq(8).text()),G.NatLastM=parseFloat(E.eq(F).find("td").eq(9).text()),G.IntFirstF=parseFloat(E.eq(F).find("td").eq(10).text()),G.IntFirstM=parseFloat(E.eq(F).find("td").eq(11).text()),G.IntLastF=parseFloat(E.eq(F).find("td").eq(12).text()),G.IntLastM=parseFloat(E.eq(F).find("td").eq(13).text()),G.FMRatio=parseFloat(E.eq(F).find("td").eq(14).text()),j.push(G)}var H=j.length;t.push(H),r=j.map(function(a){return a.continent}),a.each(r,function(b,c){-1===a.inArray(c,s)&&s.push(c)}),d3.selectAll(".continent-select").selectAll("label").data(s.sort()).enter().append("label").attr("class","checkbox").html(function(a){var b=a.replace(/_/g," ");return"<span class='icon'>	<svg height='20' width='20'><circle cx='10' cy='10' r='10' class='dots "+a+"'></circle><polygon fill='#ECF0F1' points='8.163,11.837 6.062,9.737 3.963,11.837 6.062,13.938 8.163,16.037 16.037,8.162 13.938,6.062'/></svg></span><input type='checkbox' value='"+a+"' data-continent='"+a+"' checked>"+b}),d3.selectAll(".country-select").selectAll("label").data(j.sort(c)).enter().append("label").attr("class","checkbox").html(function(a){var b=a.country.replace(/_/g," ");return"<span class='icon'>	<svg height='20' width='20'><circle cx='10' cy='10' r='10' class='dots'></circle><polygon fill='#ECF0F1' points='8.163,11.837 6.062,9.737 3.963,11.837 6.062,13.938 8.163,16.037 16.037,8.162 13.938,6.062'/></svg></span><input type='checkbox' value='"+a.country+"' data-continent='"+a.continent+"' checked>"+b+" ("+a.countryCode+")"}),d3.selectAll(".field-select input").on("change",function(){n=this.value,e(),D(n)}),d3.selectAll(".country-select input").on("change",e),d3.selectAll(".continent-select input").on("change",z),v.selectAll("rect").data(j,function(a){return a.country}).enter().append("rect").attr("width",0).attr("x",0).attr("height",0).attr("y",0);var I=d3.scale.linear().range([h,0]),J=d3.svg.axis().scale(I).tickSize(3,3).orient("left");v.append("g").attr("class","y axis").attr("transform","translate("+f.left+","+f.top+")").append("g").attr("class","axisLabel").append("text").attr("transform","rotate(-90)").attr("y",-f.left).attr("x",-h).attr("dy",".9em").style("text-anchor","left");var K=d3.scale.ordinal().domain(d3.range(j.length)).rangeRoundBands([0,g+f.right],.1);e(),b()}})};setTimeout(function(){"undefined"!=typeof jQuery?a(jQuery):setTimeout(arguments.callee,60)},60)}();
</script>
<!--<![endif]-->